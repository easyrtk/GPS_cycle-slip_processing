% ======================================
% Cycle-slip detection in measurement domain
%
% zhen.dai@dlr.de
%
% last modified: 2011.Oct
% ======================================

% Each method will generate its own detection results, including how many
% epochs having been processed, how many cycle-slip being detected and so
% on. 
% This function show these information in a table to give the user an
% overview
function datatable=GUI_Results_GenerateDataTable(status_record,vSatInView)
% input:
%  status_record         -->status generated by the associated method
%                                       (cycle-slip free, cycle-slip detected, incomplete, interrupted)
% vSatInView            --> satellites from the user setting or from raw
%                                       data
% output:
% datatable                 --> results given in a table format
Constants;
totalepoch=size(status_record,2);
satnum=size(status_record,1);
record_cycleslip=[];
total_record_cycleslip=0;
for ps=1:1:satnum,
    total_incomplete_epoch=0;
    total_interrupted_epoch=0;
    total_cycleslip=0;
    total_free=0;
    for epoch=1:1:totalepoch,
        switch (status_record(ps,epoch))
            case const_interrupt
                total_interrupted_epoch=total_interrupted_epoch+1;
            case const_incomplete
                total_incomplete_epoch=total_incomplete_epoch+1;
            case const_detected
                total_cycleslip=total_cycleslip+1;
                total_record_cycleslip=total_record_cycleslip+1;
                record_cycleslip=[record_cycleslip; [vSatInView(ps) epoch]];
            case const_cycleclipfree
                total_free=total_free+1;
        end
    end
    ttnum=[vSatInView(ps) total_cycleslip total_incomplete_epoch total_interrupted_epoch];
    datatable(ps,:)=ttnum;
end
    